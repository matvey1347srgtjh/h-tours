# ToDo List - Приложение для управления задачами

## Описание проекта

Веб-приложение для управления задачами (ToDo List) на Django. Позволяет создавать, редактировать, удалять задачи и переключать их статусы.

## Структура проекта

- `todo/app/models.py` - модель Task с полями: title, status, created_at
- `todo/app/views.py` - представления для CRUD операций
- `todo/app/templates/` - HTML шаблоны
- `todo/app/static/style/style.css` - стили приложения
- `todo/app/tests.py` - unit тесты

## Запуск проекта

```bash
# Установка виртуального окружения в корневую папку проекта (2-todo)
py -m venv venv

# Активация виртуального окружения
venv\Scripts\activate

# Установка зависимостей 
pip install django

# СОздание миграций
py todo/manage.py makemigrations

# Применение миграций
py todo/manage.py migrate

# Запуск сервера разработки
py todo/manage.py runserver
```

## Запуск тестов

```bash
cd todo
py manage.py test app # (с запущеным сервером разработки в другой консоли)
```

## Описание Unit тестов

### Тест 1: Создание задачи с дефолтными значениями
**Класс:** `TaskModelTest.test_task_creation`

**Цель тестирования:** Убедиться, что при создании задачи с указанием только названия автоматически устанавливаются дефолтные значения (статус TODO и дата создания), и что модель корректно работает с базовыми полями.

**Предпосылки:**
- Django проект настроен и работает
- Модель Task определена в приложении
- Миграции применены к базе данных
- Тестовое окружение готово к выполнению

**Шаги тестирования:**

1. Создать новую задачу с указанием только названия "Тестовая задача" через `Task.objects.create(title="Тестовая задача")`
   - **Ожидаемый результат:** Задача успешно создана в базе данных

2. Проверить, что поле `title` задачи соответствует переданному значению
   - **Ожидаемый результат:** `task.title` равно "Тестовая задача"

3. Проверить, что статус задачи установлен как `Task.Status.TODO` (дефолтное значение)
   - **Ожидаемый результат:** `task.status` равно `Task.Status.TODO`

4. Проверить, что поле `created_at` автоматически заполнено
   - **Ожидаемый результат:** `task.created_at` не равно `None`, содержит дату и время создания

5. Проверить строковое представление объекта через метод `__str__`
   - **Ожидаемый результат:** `str(task)` возвращает "Тестовая задача"



**Комментарии:** Тест проверяет базовую функциональность модели и работу дефолтных значений полей.

---

### Тест 2: Проверка сортировки задач по дате создания
**Класс:** `TaskCollectionTest.test_task_list_ordering`

**Цель тестирования:** Убедиться, что задачи корректно сортируются по дате создания в обратном порядке (новые задачи отображаются первыми), что соответствует логике отображения списка задач в приложении.

**Предпосылки:**
- Django проект настроен и работает
- Модель Task определена в приложении
- Миграции применены к базе данных
- Метод `setUp` создает три тестовые задачи последовательно

**Шаги тестирования:**

1. Создать первую задачу "Первая задача" со статусом TODO
   - **Ожидаемый результат:** Задача успешно создана в базе данных

2. Создать вторую задачу "Вторая задача" со статусом IN_PROGRESS
   - **Ожидаемый результат:** Задача успешно создана в базе данных

3. Создать третью задачу "Третья задача" со статусом DONE
   - **Ожидаемый результат:** Задача успешно создана в базе данных

4. Получить коллекцию всех задач через `Task.objects.all().order_by('-created_at')`
   - **Ожидаемый результат:** QuerySet содержит все три задачи, отсортированные по дате создания в убывающем порядке

5. Преобразовать QuerySet в список для проверки порядка
   - **Ожидаемый результат:** Список содержит три задачи

6. Проверить, что количество задач в списке равно 3
   - **Ожидаемый результат:** `len(tasks_list)` равно 3

7. Проверить, что первая задача в списке - это "Третья задача" (последняя созданная)
   - **Ожидаемый результат:** `tasks_list[0].title` равно "Третья задача"

8. Проверить, что вторая задача в списке - это "Вторая задача"
   - **Ожидаемый результат:** `tasks_list[1].title` равно "Вторая задача"

9. Проверить, что третья задача в списке - это "Первая задача" (первая созданная)
   - **Ожидаемый результат:** `tasks_list[2].title` равно "Первая задача"



**Комментарии:** Тест проверяет корректность сортировки через Django ORM и соответствие порядка задач логике приложения.

---

### Тест 3: Фильтрация задач по статусу
**Класс:** `TaskCollectionTest.test_task_filtering_by_status`

**Цель тестирования:** Убедиться, что фильтрация задач по статусу работает корректно, и каждая задача попадает в правильную отфильтрованную коллекцию в зависимости от своего статуса.

**Предпосылки:**
- Django проект настроен и работает
- Модель Task определена в приложении
- Миграции применены к базе данных
- Метод `setUp` создает три тестовые задачи с разными статусами (TODO, IN_PROGRESS, DONE)

**Шаги тестирования:**

1. Создать первую задачу "Первая задача" со статусом TODO
   - **Ожидаемый результат:** Задача успешно создана в базе данных

2. Создать вторую задачу "Вторая задача" со статусом IN_PROGRESS
   - **Ожидаемый результат:** Задача успешно создана в базе данных

3. Создать третью задачу "Третья задача" со статусом DONE
   - **Ожидаемый результат:** Задача успешно создана в базе данных

4. Выполнить фильтрацию задач по статусу TODO через `Task.objects.filter(status=Task.Status.TODO)`
   - **Ожидаемый результат:** QuerySet содержит только задачи со статусом TODO

5. Проверить количество задач со статусом TODO через метод `count()`
   - **Ожидаемый результат:** `todo_tasks.count()` равно 1

6. Выполнить фильтрацию задач по статусу IN_PROGRESS через `Task.objects.filter(status=Task.Status.IN_PROGRESS)`
   - **Ожидаемый результат:** QuerySet содержит только задачи со статусом IN_PROGRESS

7. Проверить количество задач со статусом IN_PROGRESS через метод `count()`
   - **Ожидаемый результат:** `progress_tasks.count()` равно 1

8. Выполнить фильтрацию задач по статусу DONE через `Task.objects.filter(status=Task.Status.DONE)`
   - **Ожидаемый результат:** QuerySet содержит только задачи со статусом DONE

9. Проверить количество задач со статусом DONE через метод `count()`
   - **Ожидаемый результат:** `done_tasks.count()` равно 1

10. Проверить, что первая задача находится в коллекции задач со статусом TODO через `assertIn()`
    - **Ожидаемый результат:** `self.task1` присутствует в `todo_tasks`

11. Проверить, что вторая задача находится в коллекции задач со статусом IN_PROGRESS через `assertIn()`
    - **Ожидаемый результат:** `self.task2` присутствует в `progress_tasks`

12. Проверить, что третья задача находится в коллекции задач со статусом DONE через `assertIn()`
    - **Ожидаемый результат:** `self.task3` присутствует в `done_tasks`



**Комментарии:** Тест проверяет корректность работы фильтрации через Django ORM и правильность распределения задач по статусам.

---

### Тест 4: Циклическое переключение статуса через все состояния
**Класс:** `TaskStatusToggleTest.test_status_toggle_cycle`

**Цель тестирования:** Убедиться, что статус задачи корректно переключается циклически через все возможные состояния (TODO → IN_PROGRESS → DONE → TODO), что соответствует логике переключения статусов в приложении.

**Предпосылки:**
- Django проект настроен и работает
- Модель Task определена в приложении
- Миграции применены к базе данных
- Определен порядок статусов: [TODO, IN_PROGRESS, DONE]

**Шаги тестирования:**

1. Создать задачу "Тестовая задача" со статусом TODO
   - **Ожидаемый результат:** Задача успешно создана со статусом `Task.Status.TODO`

2. Определить порядок статусов в списке `order = [Task.Status.TODO, Task.Status.IN_PROGRESS, Task.Status.DONE]`
   - **Ожидаемый результат:** Список содержит три статуса в правильном порядке

3. Выполнить первое переключение статуса: найти текущий индекс статуса в списке и вычислить следующий индекс
   - **Ожидаемый результат:** Следующий индекс вычислен корректно (1 для IN_PROGRESS)

4. Установить новый статус задачи на IN_PROGRESS и сохранить задачу
   - **Ожидаемый результат:** Задача сохранена в базе данных

5. Проверить, что статус задачи изменился на IN_PROGRESS
   - **Ожидаемый результат:** `task.status` равно `Task.Status.IN_PROGRESS`

6. Выполнить второе переключение статуса: найти текущий индекс статуса (IN_PROGRESS) и вычислить следующий индекс
   - **Ожидаемый результат:** Следующий индекс вычислен корректно (2 для DONE)

7. Установить новый статус задачи на DONE и сохранить задачу
   - **Ожидаемый результат:** Задача сохранена в базе данных

8. Проверить, что статус задачи изменился на DONE
   - **Ожидаемый результат:** `task.status` равно `Task.Status.DONE`

9. Выполнить третье переключение статуса: найти текущий индекс статуса (DONE) и вычислить следующий индекс с учетом циклического перехода
   - **Ожидаемый результат:** Следующий индекс вычислен корректно (0 для TODO, цикл замыкается)

10. Установить новый статус задачи на TODO и сохранить задачу
    - **Ожидаемый результат:** Задача сохранена в базе данных

11. Проверить, что статус задачи вернулся к TODO (цикл замыкается)
    - **Ожидаемый результат:** `task.status` равно `Task.Status.TODO`



**Комментарии:** Тест проверяет корректность циклического переключения статусов, что является ключевой функциональностью приложения для управления задачами.

---

### Тест 5: Валидация формы с корректными данными
**Класс:** `TaskFormTest.test_form_valid_data`

**Цель тестирования:** Убедиться, что форма TaskForm корректно валидирует данные и успешно создает новую задачу при передаче корректных значений названия и статуса.

**Предпосылки:**
- Django проект настроен и работает
- Форма TaskForm определена в приложении
- Модель Task определена в приложении
- Миграции применены к базе данных

**Шаги тестирования:**

1. Подготовить данные формы с корректным названием "Новая задача" и статусом TODO
   - **Ожидаемый результат:** Данные формы подготовлены в виде словаря с ключами 'title' и 'status'

2. Создать экземпляр формы TaskForm с подготовленными данными через `TaskForm(data=form_data)`
   - **Ожидаемый результат:** Экземпляр формы успешно создан

3. Проверить валидность формы через метод `is_valid()`
   - **Ожидаемый результат:** Форма валидна, `form.is_valid()` возвращает `True`

4. Сохранить форму, создав новую задачу через метод `save()`
   - **Ожидаемый результат:** Задача успешно создана и сохранена в базе данных

5. Проверить, что созданная задача имеет корректное название
   - **Ожидаемый результат:** `task.title` равно "Новая задача"

6. Проверить, что созданная задача имеет корректный статус
   - **Ожидаемый результат:** `task.status` равно `Task.Status.TODO`



**Комментарии:** Тест проверяет корректность работы формы Django и ее интеграцию с моделью данных.

---

### Тест 6: POST запрос на создание задачи через view
**Класс:** `TaskViewsTest.test_task_create_view_post`

**Цель тестирования:** Убедиться, что представление (view) `task_create` корректно обрабатывает POST запрос на создание новой задачи, создает задачу в базе данных и выполняет редирект на список задач.

**Предпосылки:**
- Django проект настроен и работает
- Представление `task_create` определено в приложении
- Форма TaskForm определена в приложении
- Модель Task определена в приложении
- Миграции применены к базе данных
- Django test client настроен в методе `setUp`
- Тестовая задача создана в методе `setUp`

**Шаги тестирования:**

1. Подготовить данные для новой задачи с названием "Новая задача через форму" и статусом IN_PROGRESS
   - **Ожидаемый результат:** Данные формы подготовлены в виде словаря с ключами 'title' и 'status'

2. Выполнить POST запрос на создание задачи через Django test client на URL `task_create` с подготовленными данными
   - **Ожидаемый результат:** POST запрос успешно отправлен на сервер

3. Проверить статус ответа сервера
   - **Ожидаемый результат:** `response.status_code` равно 302 (редирект после успешного создания)

4. Проверить, что задача создана в базе данных через `Task.objects.filter(title='Новая задача через форму').exists()`
   - **Ожидаемый результат:** Задача найдена в базе данных, метод `exists()` возвращает `True`



**Комментарии:** Тест проверяет интеграцию представления с формой и моделью, а также корректность обработки HTTP запросов и выполнения редиректа.

---

## Покрытие функционала

Тесты покрывают:
- Создание объектов модели Task
- Работу с коллекциями задач (сортировка, фильтрация)
- Переключение статусов (циклическое)
- Валидацию форм
- CRUD операции через представления
- Внутренние объекты (Status choices, методы модели)
- Работу с QuerySet и коллекциями Django ORM

## Технологии

- Python 3.13(14)
- Django 6.0.2
- Django TestCase для unit тестирования

